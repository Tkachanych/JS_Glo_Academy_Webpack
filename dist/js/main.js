(()=>{"use strict";const e=({timing:e,draw:t,duration:o})=>{const r=performance.now();requestAnimationFrame((function n(a){let c=(a-r)/o;c>1&&(c=1);const l=e(c);t(l),c<1&&requestAnimationFrame(n)}))},t=(e=[])=>{let t=!0;return 0!==e.length&&(e.forEach((e=>{if(!t)return!1;switch(e.getAttribute("name")){case"user_email":o=e.value,t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o),!t&&e.classList.add("error");break;case"user_name":t=e.value.length>=2,!t&&e.classList.add("error");break;case"user_phone":t=18===e.value.length,!t&&e.classList.add("error");break;case"user_message":t=e.value.length>0,!t&&e.classList.add("error");break;default:t=!1}var o})),t)};(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds");let n;const a=()=>{const e=(()=>{const e=(new Date("15 march 2023").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,hours:Math.floor(e/3600),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();var a;e.timeRemaining<0?clearInterval(n):(a=e,t.textContent=1===String(a.hours).length?`0${a.hours}`:a.hours,o.textContent=`0${a.minutes}`.slice(-2),r.textContent=`0${a.seconds}`.slice(-2))};a(),n=setInterval(a,1e3)})(),(()=>{const e=document.querySelector("menu"),{body:t}=document;t.addEventListener("click",(t=>{const{target:o}=t,r=e.classList.contains("active-menu"),n=o.closest('[href="#service-block"], menu a')?.getAttribute("href").slice(1);n&&t.preventDefault(),n&&"close"!==n&&(e=>{document.getElementById(e)?.scrollIntoView({block:"start",behavior:"smooth"})})(n),(o.closest(".menu")||r&&(n||o!==e))&&e.classList.toggle("active-menu")}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup"),r=o.querySelector(".popup-content"),n=()=>document.documentElement.clientWidth>=768,a=()=>{o.style.display="block",r.style.display="none",n()&&e({duration:200,timing:e=>e,draw(e){o.style.width=100*e+"%",o.style.height=100*e+"%"}}),r.style.display="block",n()&&e({duration:500,timing:e=>e,draw(e){r.style.transform=`scale(${100*e}%)`}})};t.forEach((e=>{e.addEventListener("click",a)})),o.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(n()&&e({duration:300,timing:e=>e,draw(e){r.style.transform=`translateX(${-200*e}%)`,o.style.width=100-100*e+"%"}}),setTimeout((()=>{r.removeAttribute("style"),o.removeAttribute("style")}),n()?500:0))}))})(),(()=>{const e=document.querySelectorAll(".calc-item");document.getElementById("form2-name").classList.add("form-name");const o=document.querySelectorAll(".form-name"),r=document.querySelectorAll(".form-email"),n=document.querySelector(".mess"),a=document.querySelectorAll(".form-phone");document.getElementById("form2-name").classList.remove("form-name");const c=/[^а-яё\s]+/gi,l=/[^a-z0-9\@\_\-\.\!\~\*\']+/gi,s=(e,o)=>{e.addEventListener("input",(e=>{const r=[];r.push(e.target),e.target.value=e.target.value.replace(o,""),t(r)&&e.target.classList.remove("error")}))};s(n,/[^а-яё\d\s\,\.\!\?]+/gi),e.forEach((e=>!/calc-type/.test(e.className)&&s(e,/\D+/g))),o.forEach((e=>s(e,c))),r.forEach((e=>s(e,l))),((e,t="+7 (___) ___-__-__")=>{const o=document.querySelectorAll(e),r=e=>{const{keyCode:o,target:r}=e,n=t,a=n.replace(/\D/g,""),c=r.value.replace(/\D/g,"");let l=0,s=n.replace(/[_\d]/g,(e=>l<c.length?c.charAt(l++)||a.charAt(l):e));l=s.indexOf("_"),-1!==l&&(s=s.slice(0,l));let i=n.substr(0,r.value.length).replace(/_+/g,(({length:e})=>`\\d{1,${e}}`)).replace(/[+()]/g,"\\$&");i=new RegExp(`^${i}$`),(!i.test(r.value)||r.value.length<5||o>47&&o<58)&&(r.value=s),"blur"==e.type&&r.value.length<5&&(r.value="")};for(const e of o)e.addEventListener("input",r),e.addEventListener("focus",r),e.addEventListener("blur",r)})(".form-phone"),a.forEach((e=>{e.addEventListener("input",(e=>{const o=[];o.push(e.target),t(o)&&e.target.classList.remove("error")}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=t.querySelector(".calc-type"),r=t.querySelector(".calc-square"),n=t.querySelector(".calc-count"),a=t.querySelector(".calc-day"),c=document.getElementById("total");t.addEventListener("change",(t=>{t.target!==o&&t.target!==r&&t.target!==n&&t.target!==a||(()=>{const t=+o.selectedOptions[0].value,l=+r.value;let s=0,i=1,d=1;a.value&&(d=+a.value<5?2:+a.value<10?1.5:1),+n.value>1&&(i+=+n.value/10),o.value&&r.value&&(s=e*t*l*i*d)&&(c.textContent=Math.round(s))})()}))})(100),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{const r=e.target.closest(".service-header-tab");r&&t.forEach(((e,t)=>{e===r?(e.classList.add("active"),o[t].classList.remove("d-none")):(e.classList.remove("active"),o[t].classList.add("d-none"))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=e.querySelectorAll(".portfolio-item"),o=e.querySelector(".portfolio-dots"),r=(e=>{const t=[];for(let r=0;r<e;r++)t.push(document.createElement("li")),t[r].classList.add("dot"),o.append(t[r]);return t})(t.length);let n,a=0;const c=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},s=()=>{c(t,a,"portfolio-item-active"),c(r,a,"dot-active"),a++,a>=t.length&&(a=0),l(t,a,"portfolio-item-active"),l(r,a,"dot-active")},i=(e=1500)=>{n=setInterval(s,e)};e.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(c(t,a,"portfolio-item-active"),c(r,a,"dot-active"),e.target.matches("#arrow-right")?a++:e.target.matches("#arrow-left")?a--:e.target.classList.contains("dot")&&r.forEach(((t,o)=>{e.target===t&&(a=o)})),a>=t.length&&(a=0),a<0&&(a=t.length-1),l(t,a,"portfolio-item-active"),l(r,a,"dot-active"))})),e.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(n)}),!0),e.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&i(2e3)}),!0),l(r,a,"dot-active"),i(2e3)})(),(({formId:e,someElem:o=[]})=>{const r=e.split(","),n=document.createElement("div");r.forEach((e=>{const r=document.getElementById(e);try{if(!r)throw new Error(`Не найдена форма с ID = ${e}`);r.addEventListener("submit",(e=>{e.preventDefault(),(e=>{const r=e.querySelectorAll("input"),a=new FormData(e),c={};var l;n.textContent="Загрузка...",n.style.mixBlendMode="screen",e.append(n),a.forEach(((e,t)=>{c[t]=e})),o.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?c[e.id]=t.textContent:"input"===e.type&&(c[e.id]=t.value)})),t(r)&&(l=c,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((e=>{n.textContent="Спасибо. Наш менеджер с вами свяжется!",r.forEach((e=>{e.value=""})),console.log(e)})).catch((e=>{n.textContent="Ошибка"}))})(r)}))}catch(e){console.log(e.message)}}))})({formId:"form1,form2,form3",someElem:[{type:"block",id:"total"}]})})();